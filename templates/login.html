<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoFácil - Login</title>
    <!-- csss link -->
    <link rel="stylesheet" href="../static/css/style.css">

    <!-- Favicons links -->
    <link rel="icon" type="image/png" sizes="16x16" href="../static/img/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../static/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../static/img/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="../static/img/android-chrome-512x512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../static/img/apple-touch-icon.png">

    <!-- Google Fonts link -->
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100..900&family=Titillium+Web:wght@200;300;400;600;700;900&display=swap"
        rel="stylesheet">

</head>

<body data-page='login'>
    <header class="topbar">
        <nav class="nav">
            <div class="nav-left">
                <div class="menu-trigger" id="menuTrigger" aria-haspopup="true" aria-expanded="false">
                    <img src="../static/img/menu-aberto.png" alt="Menu" id="menu">
                    <!-- Painel do menu -->
                    <div class="menu-panel" id="menuPanel">
                        <!-- Opções extras (sempre no painel) -->
                        <ul class="panel-main">
                            <li><a href="#">Promoções</a></li>
                            <li><a href="#">Atendimento</a></li>
                            <li><a href="#">Agências</a></li>
                            <li><a href="#">FAQ</a></li>
                        </ul>
                        <!-- Opções que duplicam o nav-center (apenas < 1000px) -->
                        <ul class="panel-nav">
                            <li><a href="/frota">Alugar agora</a></li>
                            <li><a href="/aluguelMensal">Aluguel mensal</a></li>
                            <li><a href="/empresas">Para empresas</a></li>
                            <li><a href="/minhasReservas">Minhas reservas</a></li>
                        </ul>
                    </div>
                </div>

                <a class="logo" href="/" aria-label="AutoFácil - Início">
                    <img src="../static/img/logo.png" alt="Logo AutoFácil" class="logo-img"
                        title="AutoFácil, aluguel de veículos">
                </a>
            </div>

            <div class="nav-right">
                <a href="#"> <img src="../static/img/pergunta.png" alt="Botão de dúvidas" class="icon-btn"
                        title="Dúvidas"> </a>
                <a href="#"> <img src="../static/img/acessibilidade2.png" alt="Botão de acessibilidade" class="icon-btn"
                        title="Acessibilidade"> </a>
                {% if session.get('usuario_logado') %}
                <a href="{{ url_for('logout') }}">
                    <img src="{{ url_for('static', filename='img/sair.png') }}" alt="Botão de logout" title="Logout"
                        class="icon-btn">
                </a>
                {% else %}
                <a href="{{ url_for('pgLogin') }}">
                    <img src="{{ url_for('static', filename='img/login2.png') }}" alt="Botão de login" title="Login"
                        class="icon-btn">
                </a>
                {% endif %}
            </div>
        </nav>
    </header>

    <main class="login-container">
        <div class="form-header">
            <h1>Acesse sua conta</h1>
            <p class="subtitle">Faça login para continuar</p>
        </div>

        <!-- ÁREA DE MENSAGENS DE ERRO -->
        {% if erro %}
        <div class="alert alert-danger">
            {{ erro }}
        </div>
        {% endif %}

        <!-- SELEÇÃO DE TIPO DE CONTA -->
        <div class="tipo-conta-container">
            <h2 class="tipo-conta-title">Selecione o tipo de conta</h2>
            <form method="GET" action="{{ url_for('pgLogin') }}"> 
                <div class="tipo-conta-opcoes">
                    <div class="tipo-conta-opcao">
                        <input type="radio" id="pessoa-fisica" name="tipo_conta" value="fisica" class="tipo-conta-radio"
                            {% if not request.args.get('tipo_conta') and not request.form.get('tipo_conta')=='juridica'
                            or request.args.get('tipo_conta')=='fisica' %}checked{% endif %}>
                        <label for="pessoa-fisica" class="tipo-conta-label">
                            <img src="../static/img/pessoa-fisica.png" alt="Pessoa Física" class="tipo-conta-icon">
                            Pessoa Física
                        </label>
                    </div>
                    <div class="tipo-conta-opcao">
                        <input type="radio" id="pessoa-juridica" name="tipo_conta" value="juridica"
                            class="tipo-conta-radio" {% if request.args.get('tipo_conta')=='juridica' or
                            request.form.get('tipo_conta')=='juridica' %}checked{% endif %}>
                        <label for="pessoa-juridica" class="tipo-conta-label">
                            <img src="../static/img/pessoa-juridica.png" alt="Pessoa Jurídica" class="tipo-conta-icon">
                            Pessoa Jurídica
                        </label>
                    </div>
                </div>
                <button type="submit" style="display: none;" id="submit-tipo">Selecionar</button>
            </form>
        </div>

        <!-- LOGIN PESSOA FÍSICA -->
        {% if not request.args.get('tipo_conta') and not request.form.get('tipo_conta') == 'juridica' or
        request.args.get('tipo_conta') == 'fisica' %}
        <div class="login-box">
            <h2>Login - Pessoa Física</h2>
            
            <form action="{{ url_for('user_pf_bp.login') }}" method="POST">
                <input type="hidden" name="tipo_conta" value="fisica">

                <div class="form-group">
                    <label for="user_pf">E-mail ou CPF</label>
                    <input type="text" id="user_pf" name="user" placeholder="Digite seu e-mail ou CPF" required
                        value="{{ request.form.user if request.form }}">
                </div>

                <div class="form-group">
                    <label for="password_pf">Senha</label>
                    <div class="password-wrapper">
                        <input type="password" id="password_pf" name="password" placeholder="Digite sua senha" required>
                        <span class="toggle-password" data-target="password_pf"></span>
                    </div>
                </div>

                <div class="options">
                    <label>
                        <input type="checkbox" name="lembrar">
                        Lembrar-me
                    </label>
                    <a href="#">Esqueceu a senha?</a>
                </div>

                <button type="submit" class="btn-login" title="Enviar">Entrar</button>
            </form>

            <p class="signup">Não tem uma conta? <a href="/cadastro">Cadastre-se</a></p>
        </div>
        {% endif %}

        <!-- LOGIN PESSOA JURÍDICA -->
        {% if request.args.get('tipo_conta') == 'juridica' or request.form.get('tipo_conta') == 'juridica' %}
        <div class="login-box">
            <h2>Login - Pessoa Jurídica</h2>
            
            <form action="{{ url_for('user_pj_bp.login') }}" method="POST">
                <input type="hidden" name="tipo_conta" value="juridica">

                <div class="form-group">
                    <label for="user_pj">E-mail ou CNPJ</label>
                    <input type="text" id="user_pj" name="user" placeholder="Digite seu e-mail ou CNPJ" required
                        value="{{ request.form.user if request.form }}">
                </div>

                <div class="form-group">
                    <label for="password_pj">Senha</label>
                    <div class="password-wrapper">
                        <input type="password" id="password_pj" name="password" placeholder="Digite sua senha" required>
                        <span class="toggle-password" data-target="password_pj"></span>
                    </div>
                </div>

                <div class="options">
                    <label>
                        <input type="checkbox" name="lembrar">
                        Lembrar-me
                    </label>
                    <a href="#">Esqueceu a senha?</a>
                </div>

                <button type="submit" class="btn-login" title="Enviar">Entrar</button>
            </form>

            <p class="signup">Não tem uma conta? <a href="/cadastro?tipo_conta=juridica">Cadastre sua empresa</a></p>
        </div>
        {% endif %}
    </main>

    <!-- ======= FOOTER ======= -->
    <footer>
        <p>© 2025 AutoFácil. Todos os direitos reservados.</p>
        <div class="footer-social">
            <a href="#" target="_blank"><img src="../static/img/wpp2.png" alt="WhatsApp"
                    title="Whatsapp"></a>
            <a href="https://facebook.com" target="_blank"><img src="../static/img/facebook2.png" alt="Facebook"
                    title="Facebook"></a>
            <a href="https://instagram.com" target="_blank"><img src="../static/img/instagram2.png" alt="Instagram"
                    title="Instagram"></a>
            <a href="#"><img src="../static/img/email2.png" alt="Email" title="Email"></a>
        </div>
    </footer>
    <script src="../static/js/script.js"></script>
</body>

</html>