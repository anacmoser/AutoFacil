<!-- 
TAREFAS:
    * Colocar script no arquivo js
    * Reduzir o código com Django
-->


<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frota - AutoFácil</title>
    <!-- csss link -->
    <link rel="stylesheet" href="../static/css/style.css">

    <!-- Favicons links -->
    <link rel="icon" type="image/png" sizes="16x16" href="../static/img/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../static/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../static/img/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="../static/img/android-chrome-512x512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../static/img/apple-touch-icon.png">

    <!-- Google Fonts link -->
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100..900&family=Titillium+Web:wght@200;300;400;600;700;900&display=swap"
        rel="stylesheet">

</head>

<body data-page='frota'>
    <header class="topbar">
        <nav class="nav">
            <div class="nav-left">
                <div class="menu-trigger" id="menuTrigger" aria-haspopup="true" aria-expanded="false">
                    <img src="../static/img/menu-aberto.png" alt="Menu" id="menu">
                    <!-- Painel do menu -->
                    <div class="menu-panel" id="menuPanel">
                        <!-- Opções extras (sempre no painel) -->
                        <ul class="panel-main">
                            <li><a href="#">Promoções</a></li>
                            <li><a href="#">Atendimento</a></li>
                            <li><a href="#">Agências</a></li>
                            <li><a href="#">FAQ</a></li>
                        </ul>
                        <!-- Opções que duplicam o nav-center (apenas < 1000px) -->
                        <ul class="panel-nav">
                            <li><a href="/frota">Alugar agora</a></li>
                            <li><a href="#">Aluguel mensal</a></li>
                            <li><a href="#">Para empresas</a></li>
                            <li><a href="#">Minhas reservas</a></li>
                        </ul>
                    </div>

                </div>

                <a class="logo" href="{{ url_for('index') }}" aria-label="AutoFácil - Início">
                    <img src="../static/img/logo.png" alt="Logo AutoFácil" class="logo-img">
                </a>
            </div>

            <div class="nav-center">
                <a href="/frota" class="nav-btn">Alugar agora</a>
                <a href="#" class="nav-btn">Aluguel mensal</a>
                <a href="#" class="nav-btn">Para empresas</a>
                <a href="#" class="nav-btn">Minhas reservas</a>
            </div>
            
            <div class="nav-right">
                <a href="#">
                    <img src="{{ url_for('static', filename='img/pergunta.png') }}" alt="Botão de dúvidas"
                        title="Dúvidas" class="icon-btn">
                </a>
                <a href="#">
                    <img src="{{ url_for('static', filename='img/acessibilidade2.png') }}" alt="Botão de acessibilidade"
                        title="Acessibilidade" class="icon-btn">
                </a>

                {% if session.get('usuario_logado') %}
                <!-- Se usuário estiver logado, mostra logout -->
                <a href="{{ url_for('logout') }}">
                    <img src="{{ url_for('static', filename='img/sair2.png') }}" alt="Botão de logout" title="Logout"
                        class="icon-btn">
                </a>
                {% else %}
                <!-- Se não estiver logado, mostra login -->
                <a href="{{ url_for('mudarLogin') }}">
                    <img src="{{ url_for('static', filename='img/login2.png') }}" alt="Botão de login" title="Login"
                        class="icon-btn">
                </a>
                {% endif %}
            </div>

        </nav>
    </header>


    <!-- Filtros -->
    <!-- Substitua a seção de filtros por este código atualizado -->
<section class="filtros-container">
    <h2 class="filtros-title">Filtrar por categoria</h2>
    <div class="filtros-categorias">
        <button class="filtro-btn active" data-categoria="todos"><i class="fas fa-car"></i> Todos</button>
        <button class="filtro-btn" data-categoria="econômico"><i class="fas fa-car-side"></i> Econômicos</button>
        <button class="filtro-btn" data-categoria="sedan"><i class="fas fa-sedan"></i> Sedans</button>
        <button class="filtro-btn" data-categoria="suv"><i class="fas fa-shuttle-van"></i> SUVs</button>
        <button class="filtro-btn" data-categoria="luxo"><i class="fas fa-car-alt"></i> Luxo</button>
        <button class="filtro-btn" data-categoria="pick-up"><i class="fas fa-truck-pickup"></i> Pick-ups</button>
    </div>
    <div class="filtros-avancados">
        <h3>Filtros avançados</h3>
        <div class="filtros-grid">
            <div class="filtro-group">
                <label for="marca">Marca</label>
                <select id="marca">
                    <option value="">Todas as marcas</option>
                    <option value="fiat">Fiat</option>
                    <option value="volkswagen">Volkswagen</option>
                    <option value="toyota">Toyota</option>
                    <option value="honda">Honda</option>
                    <option value="chevrolet">Chevrolet</option>
                    <option value="renault">Renault</option>
                    <option value="hyundai">Hyundai</option>
                    <option value="jeep">Jeep</option>
                    <option value="bmw">BMW</option>
                    <option value="mercedes">Mercedes-Benz</option>
                    <option value="ford">Ford</option>
                </select>
            </div>
            
            <div class="filtro-group">
                <label for="modelo">Modelo</label>
                <select id="modelo">
                    <option value="">Todos os modelos</option>
                    <option value="argo">Argo</option>
                    <option value="gol">Gol</option>
                    <option value="corolla">Corolla</option>
                    <option value="civic">Civic</option>
                    <option value="compass">Compass</option>
                    <option value="rav4">RAV4</option>
                    <option value="hilux">Hilux</option>
                    <option value="ranger">Ranger</option>
                    <option value="kwid">Kwid</option>
                    <option value="creta">Creta</option>
                </select>
            </div>
            
            <div class="filtro-group">
                <label for="transmissao">Transmissão</label>
                <select id="transmissao">
                    <option value="">Qualquer</option>
                    <option value="automatico">Automático</option>
                    <option value="manual">Manual</option>
                </select>
            </div>

            <div class="filtro-group">
                <label for="combustivel">Combustível</label>
                <select id="combustivel">
                    <option value="">Qualquer</option>
                    <option value="gasolina">Gasolina</option>
                    <option value="diesel">Diesel</option>
                    <option value="alcool">Álcool</option>
                    <option value="flex">Flex</option>
                    <option value="hibrido">Híbrido</option>
                    <option value="eletrico">Elétrico</option>
                </select>
            </div>
            
            <div class="filtro-group">
                <label for="preco">Preço máximo/dia</label>
                <input type="number" id="preco" placeholder="R$ 200,00" min="0">
            </div>
            
            <div class="filtro-group">
                <label for="malas">Mínimo de malas</label>
                <input type="number" id="malas" min="0" value="">
            </div>
            
            <div class="filtro-group">
                <label for="passageiros">Mínimo de passageiros</label>
                <input type="number" id="passageiros" min="1" value="">
            </div>
            
            <div class="filtro-group">
                <label for="portas">Mínimo de portas</label>
                <input type="number" id="portas" min="0" value="">
            </div>
        </div>
    </div>
    
    <button class="btn-aplicar" id="aplicar-filtros">Aplicar Filtros</button>
    <button class="btn-limpar" id="limpar-filtros">Limpar Filtros</button>
</section>

    <!-- Frota de Veículos -->
    <!-- Frota de Veículos -->
    <section class="frota-container">
        <div class="veiculos-header">
            <h2 class="veiculos-titulo">Carros disponíveis</h2>
            <div class="ordenacao">
                <select id="ordenacao">
                    <option value="preco_asc">Ordenar por: Menor preço</option>
                    <option value="preco_desc">Ordenar por: Maior preço</option>
                    <option value="nome_asc">Ordenar por: Nome A-Z</option>
                </select>
            </div>
        </div>

        <div class="veiculos-grid">
            {% for veiculo in veiculos %}
            <!-- Veículo {{ veiculo.id }} -->
            <div class="veiculo-card">
                <div class="veiculo-imagem">
                    <img src="{{ veiculo.imagem }}" alt="{{ veiculo.nome }}">
                </div>
                <div class="veiculo-info">
                    <div class="veiculo-categoria">{{ veiculo.categoria }}</div>
                    <h3 class="veiculo-nome">{{ veiculo.nome }}</h3>
                    <div class="veiculo-detalhes">
                        <div class="veiculo-detalhe">
                            <i class="fas fa-user"></i> {{ veiculo.passageiros }} passageiros
                        </div>
                        <div class="veiculo-detalhe">
                            <i class="fas fa-suitcase"></i> {{ veiculo.malas }} malas
                        </div>
                        <div class="veiculo-detalhe">
                            <i class="fas fa-cog"></i>
                            {% if veiculo.transmissao == 'automatico' %}Automático{% else %}Manual{% endif %}
                        </div>
                        <div class="veiculo-detalhe">
                            <i class="fas fa-gas-pump"></i> {{ veiculo.combustivel }}
                        </div>
                    </div>
                    <div class="veiculo-preco">
                        R$ {{ veiculo.preco }} <span>/dia</span>
                    </div>
                    <button class="btn-alugar">Alugar agora</button>
                </div>
            </div>
            {% else %}
            <div class="nenhum-veiculo">
                <p>Nenhum veículo encontrado com os filtros selecionados.</p>
            </div>
            {% endfor %}
        </div>
    </section>
    <!-- Benefícios -->
    <section class="beneficios">
        <div class="beneficios-container">
            <h2 class="beneficios-titulo">Por que alugar na AutoFácil?</h2>
            <div class="beneficios-grid">
                <div class="beneficio-item">
                    <div class="beneficio-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="beneficio-titulo">Proteção Total</h3>
                    <p class="beneficio-desc">Seguro completo incluso em todos os aluguéis para sua tranquilidade.</p>
                </div>
                <div class="beneficio-item">
                    <div class="beneficio-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <h3 class="beneficio-titulo">Manutenção Regular</h3>
                    <p class="beneficio-desc">Todos os veículos passam por revisões periódicas para sua segurança.</p>
                </div>
                <div class="beneficio-item">
                    <div class="beneficio-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3 class="beneficio-titulo">Suporte 24h</h3>
                    <p class="beneficio-desc">Estamos disponíveis a qualquer hora para ajudar no que precisar.</p>
                </div>
                <div class="beneficio-item">
                    <div class="beneficio-icon">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <h3 class="beneficio-titulo">Melhor Preço</h3>
                    <p class="beneficio-desc">Garantimos o melhor preço do mercado com descontos exclusivos.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ======= FOOTER ======= -->
    <footer>
        <p>© 2025 AutoFácil. Todos os direitos reservados.</p>
        <div class="footer-social">
            <a href="https://wa.me/55XXXXXXXXXXX" target="_blank"><img src="../static/img/wpp.png" alt="WhatsApp" title="WhatsApp"></a>
            <a href="https://facebook.com" target="_blank"><img src="../static/img/facebook.png" alt="Facebook" title="Facebook"></a>
            <a href="https://instagram.com" target="_blank"><img src="../static/img/instagram.png" alt="Instagram" title="Instagram"></a>
            <a href="mailto:contato@autofacil.com"><img src="../static/img/email.png" alt="Email" title="E-mail"></a>
        </div>
    </footer>

    <script src="../static/js/script.js"></script>
</body>

</html>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Elementos da interface
        const filtroBtns = document.querySelectorAll('.filtro-btn');
        const aplicarBtn = document.getElementById('aplicar-filtros');
        const limparBtn = document.getElementById('limpar-filtros');
        const veiculosGrid = document.querySelector('.veiculos-grid');
        
        // Filtros de categoria
        filtroBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                filtroBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                aplicarFiltros();
            });
        });
        
        // Botão aplicar filtros
        aplicarBtn.addEventListener('click', aplicarFiltros);
        
        // Botão limpar filtros
        limparBtn.addEventListener('click', limparFiltros);
        
        // Aplicar filtros quando valores mudam
        document.getElementById('marca').addEventListener('change', aplicarFiltros);
        document.getElementById('modelo').addEventListener('change', aplicarFiltros);
        document.getElementById('transmissao').addEventListener('change', aplicarFiltros);
        document.getElementById('combustivel').addEventListener('change', aplicarFiltros);
        document.getElementById('preco').addEventListener('input', aplicarFiltros);
        document.getElementById('malas').addEventListener('input', aplicarFiltros);
        document.getElementById('passageiros').addEventListener('input', aplicarFiltros);
        document.getElementById('portas').addEventListener('input', aplicarFiltros);
        
        // Função para aplicar filtros
        function aplicarFiltros() {
            const categoriaAtiva = document.querySelector('.filtro-btn.active').dataset.categoria;
            const marca = document.getElementById('marca').value;
            const modelo = document.getElementById('modelo').value;
            const transmissao = document.getElementById('transmissao').value;
            const combustivel = document.getElementById('combustivel').value;
            const preco = document.getElementById('preco').value;
            const malas = document.getElementById('malas').value;
            const passageiros = document.getElementById('passageiros').value;
            const portas = document.getElementById('portas').value;
            
            // Enviar requisição para a API
            fetch('/api/filtrar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    categoria: categoriaAtiva,
                    marca: marca,
                    modelo: modelo,
                    transmissao: transmissao,
                    combustivel: combustivel,
                    preco_maximo: preco,
                    malas_min: malas,
                    passageiros_min: passageiros,
                    portas_min: portas
                })
            })
            .then(response => response.json())
            .then(veiculos => {
                exibirVeiculos(veiculos);
            })
            .catch(error => {
                console.error('Erro ao filtrar veículos:', error);
            });
        }
        
        // Função para limpar filtros
        function limparFiltros() {
            // Resetar botões de categoria
            filtroBtns.forEach(btn => btn.classList.remove('active'));
            document.querySelector('[data-categoria="todos"]').classList.add('active');
            
            // Resetar selects
            document.getElementById('marca').value = '';
            document.getElementById('modelo').value = '';
            document.getElementById('transmissao').value = '';
            document.getElementById('combustivel').value = '';
            
            // Resetar inputs
            document.getElementById('preco').value = '';
            document.getElementById('malas').value = '';
            document.getElementById('passageiros').value = '';
            document.getElementById('portas').value = '';
            
            // Aplicar filtros (vai buscar todos os veículos)
            aplicarFiltros();
        }
        
        // Função para exibir veículos
        function exibirVeiculos(veiculos) {
            if (veiculos.length === 0) {
                veiculosGrid.innerHTML = `
                    <div class="nenhum-veiculo">
                        <i class="fas fa-car fa-3x"></i>
                        <h3>Nenhum veículo encontrado</h3>
                        <p>Tente ajustar os filtros para ver mais resultados.</p>
                    </div>
                `;
                return;
            }
            
            veiculosGrid.innerHTML = '';
            
            veiculos.forEach(veiculo => {
                const veiculoCard = document.createElement('div');
                veiculoCard.className = 'veiculo-card';
                
                veiculoCard.innerHTML = `
                    <div class="veiculo-imagem">
                        <img src="${veiculo.imagem}" alt="${veiculo.nome}">
                    </div>
                    <div class="veiculo-info">
                        <div class="veiculo-categoria">${veiculo.categoria}</div>
                        <h3 class="veiculo-nome">${veiculo.nome}</h3>
                        <div class="veiculo-detalhes">
                            <div class="veiculo-detalhe">
                                <i class="fas fa-user"></i> ${veiculo.passageiros} passageiros
                            </div>
                            <div class="veiculo-detalhe">
                                <i class="fas fa-suitcase"></i> ${veiculo.malas} malas
                            </div>
                            <div class="veiculo-detalhe">
                                <i class="fas fa-cog"></i> 
                                ${veiculo.transmissao === 'automatico' ? 'Automático' : 'Manual'}
                            </div>
                            <div class="veiculo-detalhe">
                                <i class="fas fa-gas-pump"></i> ${veiculo.combustivel}
                            </div>
                        </div>
                        <div class="veiculo-preco">
                            R$ ${veiculo.preco} <span>/dia</span>
                        </div>
                        <button class="btn-alugar">Alugar agora</button>
                    </div>
                `;
                
                veiculosGrid.appendChild(veiculoCard);
            });
            
            // Adicionar event listeners aos botões de alugar
            const alugarBtns = document.querySelectorAll('.btn-alugar');
            alugarBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    alert('Veículo adicionado ao processo de reserva! Em breve você será redirecionado.');
                });
            });
        }
        
        // Aplicar filtros ao carregar a página
        aplicarFiltros();
    });
</script>

</body>

</html>